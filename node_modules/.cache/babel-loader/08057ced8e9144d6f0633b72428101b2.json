{"ast":null,"code":"import { call, put, takeEvery } from 'redux-saga/effects';\nimport { getFormValues, reset } from 'redux-form';\nimport CryptoJS from 'crypto-js';\nimport { API_SERVER, CHANGE_PASSWORD } from '../constants';\nimport store from '../store';\nimport { apiManualPost } from '../utils/request';\nimport { showSuccessSnackbar, showFailedSnackbar } from '../actions';\n\nfunction* changePasswordSaga() {\n  try {\n    const formValues = getFormValues('changePassword')(store.getState());\n    const hashedOldPassword = CryptoJS.SHA256(formValues.current_password).toString();\n    const hashedPassword = CryptoJS.SHA256(formValues.new_password).toString();\n    const uuid = store.getState().client.user.data[2];\n    const body = JSON.stringify({\n      oldpassword: hashedOldPassword,\n      password: hashedPassword,\n      uuid\n    });\n    const url = `${API_SERVER}/UpdateUserCredentials`;\n    const result = yield call(apiManualPost, url, body);\n    yield put(reset('password'));\n\n    if (result.data === 'User password updated successfully!') {\n      yield put(showSuccessSnackbar());\n      yield put(reset('changePassword'));\n    } else {\n      yield put(showFailedSnackbar());\n    }\n  } catch (e) {// passwordUpdateFailed(e)\n  }\n}\n\nexport function* watchChangePasswordSaga() {\n  yield takeEvery(CHANGE_PASSWORD, changePasswordSaga);\n}","map":{"version":3,"names":["call","put","takeEvery","getFormValues","reset","CryptoJS","API_SERVER","CHANGE_PASSWORD","store","apiManualPost","showSuccessSnackbar","showFailedSnackbar","changePasswordSaga","formValues","getState","hashedOldPassword","SHA256","current_password","toString","hashedPassword","new_password","uuid","client","user","data","body","JSON","stringify","oldpassword","password","url","result","e","watchChangePasswordSaga"],"sources":["C:/Users/shuli/OneDrive/Desktop/Work/JobportalN/JobPortalEE/src/sagas/changePassword.saga.js"],"sourcesContent":["import { call, put, takeEvery } from 'redux-saga/effects';\r\nimport { getFormValues, reset } from 'redux-form';\r\nimport CryptoJS from 'crypto-js';\r\nimport { API_SERVER, CHANGE_PASSWORD } from '../constants';\r\nimport store from '../store';\r\nimport { apiManualPost } from '../utils/request';\r\nimport { showSuccessSnackbar, showFailedSnackbar } from '../actions';\r\n\r\nfunction* changePasswordSaga() {\r\n  try {\r\n    const formValues = getFormValues('changePassword')(store.getState());\r\n    const hashedOldPassword = CryptoJS.SHA256(formValues.current_password).toString();\r\n    const hashedPassword = CryptoJS.SHA256(formValues.new_password).toString();\r\n    const uuid = store.getState().client.user.data[2];\r\n    const body = JSON.stringify({\r\n      oldpassword: hashedOldPassword,\r\n      password: hashedPassword,\r\n      uuid,\r\n    });\r\n    const url = `${API_SERVER}/UpdateUserCredentials`;\r\n    const result = yield call(apiManualPost, url, body);\r\n    yield put(reset('password'));\r\n    if (result.data === 'User password updated successfully!') {\r\n      yield put(showSuccessSnackbar());\r\n      yield put(reset('changePassword'));\r\n    } else {\r\n      yield put(showFailedSnackbar());\r\n    }\r\n  } catch (e) {\r\n    // passwordUpdateFailed(e)\r\n  }\r\n}\r\n\r\nexport function* watchChangePasswordSaga() {\r\n  yield takeEvery(CHANGE_PASSWORD, changePasswordSaga);\r\n}\r\n"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,EAAoBC,SAApB,QAAqC,oBAArC;AACA,SAASC,aAAT,EAAwBC,KAAxB,QAAqC,YAArC;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,SAASC,UAAT,EAAqBC,eAArB,QAA4C,cAA5C;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,SAASC,aAAT,QAA8B,kBAA9B;AACA,SAASC,mBAAT,EAA8BC,kBAA9B,QAAwD,YAAxD;;AAEA,UAAUC,kBAAV,GAA+B;EAC7B,IAAI;IACF,MAAMC,UAAU,GAAGV,aAAa,CAAC,gBAAD,CAAb,CAAgCK,KAAK,CAACM,QAAN,EAAhC,CAAnB;IACA,MAAMC,iBAAiB,GAAGV,QAAQ,CAACW,MAAT,CAAgBH,UAAU,CAACI,gBAA3B,EAA6CC,QAA7C,EAA1B;IACA,MAAMC,cAAc,GAAGd,QAAQ,CAACW,MAAT,CAAgBH,UAAU,CAACO,YAA3B,EAAyCF,QAAzC,EAAvB;IACA,MAAMG,IAAI,GAAGb,KAAK,CAACM,QAAN,GAAiBQ,MAAjB,CAAwBC,IAAxB,CAA6BC,IAA7B,CAAkC,CAAlC,CAAb;IACA,MAAMC,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAe;MAC1BC,WAAW,EAAEb,iBADa;MAE1Bc,QAAQ,EAAEV,cAFgB;MAG1BE;IAH0B,CAAf,CAAb;IAKA,MAAMS,GAAG,GAAI,GAAExB,UAAW,wBAA1B;IACA,MAAMyB,MAAM,GAAG,MAAM/B,IAAI,CAACS,aAAD,EAAgBqB,GAAhB,EAAqBL,IAArB,CAAzB;IACA,MAAMxB,GAAG,CAACG,KAAK,CAAC,UAAD,CAAN,CAAT;;IACA,IAAI2B,MAAM,CAACP,IAAP,KAAgB,qCAApB,EAA2D;MACzD,MAAMvB,GAAG,CAACS,mBAAmB,EAApB,CAAT;MACA,MAAMT,GAAG,CAACG,KAAK,CAAC,gBAAD,CAAN,CAAT;IACD,CAHD,MAGO;MACL,MAAMH,GAAG,CAACU,kBAAkB,EAAnB,CAAT;IACD;EACF,CAnBD,CAmBE,OAAOqB,CAAP,EAAU,CACV;EACD;AACF;;AAED,OAAO,UAAUC,uBAAV,GAAoC;EACzC,MAAM/B,SAAS,CAACK,eAAD,EAAkBK,kBAAlB,CAAf;AACD"},"metadata":{},"sourceType":"module"}