{"ast":null,"code":"import { useState } from 'react';\nimport { takeEvery, put, call } from 'redux-saga/effects';\nimport { getFormValues, change, formValueSelector, initialize, getFormInitialValues, touch } from 'redux-form';\nimport { SAVE_AND_PUBLISH_ADVERTISEMENT, UPDATE_AND_PUBLISH_ADVERTISEMENT, API_SERVER, API_SERVER_EST, API_SERVER_EST_GET_ID, GET_ALL_CAMPAIGNS, OPEN_AD_TO_SEE_AD_INFO, UPDATE_ADVERTISEMENT, POPULATE_VACANCY_FORM, DELETE_ADVERTISEMENT, GET_ALL_JOB_CATEGORY, GET_ALL_ADS_BY_STATUS, SAVE_ADVERTISEMENT_AS_DRAFT, SAVE_NEW_CAMPAIGN, CHANGE_ACTIVE_POST_TO_INACTIVE, GET_APPLICATION_DETAILS_BY_ID, UPDATE_APPLICANT_STATUS, GET_JOBPOST_VIEWS_BY_DATE, NAVIGATE_ADS_FROM_MAIN_MENU, UPDATE_JOB_APPLICATION_DETAILS, EDIT_INTERVIEW_DETAILS, SAVE_MARKETING_DETAILS, DELETE_APPLICATION, CHANGE_ROUTE, ADMIN_GET_USER_PROFILE, HELP_SERVICE_FEE, SOS_SERVICE_FEE, POPULATE_EMAIL_MESSAGE, AUTO_EMAIL_TO_APPLICANT, GET_JOBS_OFFERS, GET_JOBS_OFFERS_SUCCESS } from '../constants';\nimport store from '../store';\nimport { apiManualRequest, apiManualPost, apiOpenRequest, apiGetJobsOffers } from '../utils/request';\nimport { filterObj } from '../utils/wrappers';\nimport { getAllCampaignsSuccess, saveAndPublishAdvertisementSuccess, getAllJobCategorySuccess, saveAndPublishAdvertisementFailed, getAllAdsByStatusSuccess, saveAndPublishAdvertisement, showSuccessSnackbar, showFailedSnackbar, openAdToSeeAdInfo, populateVacancyFormSuccess, updateAndPublishAdvertisementSuccess, getApplicationDetailsById, getApplicationDetailsByIdSuccess, getJobPostViewsByDateSuccess, changeAdvertPage, getAllAdsByStatus, filterJobs, hideSpinner, saveMarketingDetailsSuccess, closeDialog, registerPayment, sendInvoiceToTalous, getCompanyProfileSuccess, openAdToSeeAdInfoSuccess, getJobsOffers } from '../actions';\nimport { customTranslateCampaign } from '../utils/customTranslate';\nimport browserHistory from '../history';\nimport { messageTemplate } from '../components/companies/advertisements/automaticMessageToApplicants/messages'; // GET JOBS OFFERS\n// function* getJobsOffersSaga() {\n//   try {\n//     const offers = yield call(apiGetJobsOffers);\n//     yield put({type: GET_JOBS_OFFERS_SUCCESS, offers})\n//   } catch (error) {\n//     console.log(error);\n//   }\n// }\n// END\n\nfunction* getAllCampaignsSaga() {\n  try {\n    const url = `${API_SERVER}/GetCampaigns`;\n    const result = yield call(apiManualRequest, url);\n    const resultParsed = JSON.parse(result.data);\n    yield put(getAllCampaignsSuccess(resultParsed));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* getAllJobCategorySaga(jobPostNumber) {\n  try {\n    const jobPostNumber = 654439;\n    const url = `${API_SERVER_EST}/${jobPostNumber}`;\n    const result = yield call(apiOpenRequest, url);\n    const resultParsed = JSON.parse(result.data);\n    yield put(getAllJobCategorySuccess(resultParsed));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* saveAndPublishAdvertisementSaga() {\n  try {\n    let url;\n    let body;\n    let parsedCompany = {};\n    const {\n      advertisement,\n      client,\n      companyProfile\n    } = store.getState();\n    const formValues = getFormValues('vacancy')(store.getState());\n    const paymentInfoForm = getFormValues('paymentInfo')(store.getState());\n    const uuid = client.user.data[2];\n    const userRole = client.user.data[6].user_type;\n    const payment_method = paymentInfoForm && paymentInfoForm.payment_method;\n    const companyBusinessId = companyProfile.profile.companyBusinessId;\n\n    if (!formValues.companyBusinessId) {\n      formValues.companyBusinessId = companyBusinessId; // Also sending company_id to add company specific post.\n    }\n\n    yield put(closeDialog());\n\n    if (userRole === 'admin') {\n      const companyDetails = {\n        companyBusinessId: parseInt(formValues.companyBusinessId),\n        uuid\n      };\n      const jobPostOwner = yield call(apiManualPost, `${API_SERVER_EST}/postJob`, JSON.stringify({ ...companyDetails\n      }));\n      parsedCompany = JSON.parse(jobPostOwner.data);\n    }\n\n    const {\n      selectedCampaign,\n      isSaveAdvertisementAsDraft,\n      isToEdit,\n      uploadedImage,\n      marketingDetails,\n      extraService\n    } = advertisement;\n    const isDraft = isSaveAdvertisementAsDraft;\n    const refinedUploadedImage = uploadedImage && uploadedImage.name && uploadedImage.name.replace(/\\s+\\(\\d+\\)/g, 'JP'); // If stored filename has (int), dropzone doesn't understand the path..so changing such names before sending to db.\n\n    const refinedFormValues = filterObj('image_document', formValues);\n\n    if (isToEdit) {\n      url = `${API_SERVER}/UpdateJobPost`;\n    } else {\n      url = `${API_SERVER_EST}`;\n    }\n\n    const statusToUpdate = isDraft || extraService.help || extraService.sos ? 0 : selectedCampaign.type === 'free' ? 1 : 4;\n    const selectedService = extraService.help ? 'help' : extraService.sos ? 'sos' : null; // image_document array means, it already exists in db, no need to send while updating\n\n    if (Array.isArray(formValues.image_document) === true) {\n      body = { ...refinedFormValues,\n        uuid,\n        campaign_type: selectedCampaign.type,\n        status: statusToUpdate,\n        extra_service: selectedService\n      };\n    } else if (!uploadedImage.name) {\n      // no uploaded image means, no need to send any base64. Also, if there is an image stored in db..and we want to delete it, I am changing the formvalues of image_document in component\n      body = { ...formValues,\n        uuid,\n        campaign_type: selectedCampaign.type,\n        status: statusToUpdate,\n        extra_service: selectedService\n      };\n    } else if (uploadedImage.name && !Array.isArray(formValues.image_document)) {\n      const base64 = formValues.image_document;\n      body = { ...formValues,\n        uuid,\n        campaign_type: selectedCampaign.type,\n        status: statusToUpdate,\n        image_document: {\n          uuid,\n          document_id: uploadedImage.id,\n          path: '',\n          filename: refinedUploadedImage,\n          filetype: uploadedImage.type,\n          data: base64\n        },\n        extra_service: selectedService\n      };\n    }\n\n    if (selectedCampaign.includes_mktbudget) {\n      const {\n        marketing_platform,\n        more_budget,\n        marketing_budget\n      } = marketingDetails;\n      body.marketing_platform = !!marketing_platform ? marketing_platform : null;\n      body.more_budget = !!more_budget ? more_budget : null;\n      body.marketing_budget = !!marketing_budget ? parseInt(marketing_budget) : 0;\n    } // SAVING AND PUBLISHING JOBPOST\n\n\n    const result = yield call(apiManualPost, url, JSON.stringify({ ...body\n    }));\n    const parsedResult = JSON.parse(result.data); //console.log(result.data);\n    // If publishing post, Generate invoice under the hood via Talousvirta API or online payment via NETS\n\n    if (parsedResult) {\n      const {\n        company_name,\n        business_id,\n        firstname,\n        lastname,\n        email,\n        address,\n        zip_code,\n        city\n      } = userRole === 'admin' ? parsedCompany[0] : companyProfile.profile;\n      const jobTitle = formValues.jobName;\n      const postId = parsedResult[0].jobPostNumber;\n      const orderId = parsedResult[0].order_id;\n      const publishedPostStatus = parsedResult[0].job_post_status;\n      const description = `${jobTitle} | Kampanjapaketti - ${customTranslateCampaign(selectedCampaign.id)}`;\n      const mkt_description = `${jobTitle} | Lisätty markkinointiraha`;\n      const extra_service_description = `Aktivoitu lisäpalvelu | ${extraService.help ? 'HELP' : 'SOS'}`; // If mkt budget is added with campaigns with mkt budget, i.e. 5th campaign for now.\n\n      let marketing_budget = 0;\n\n      if (selectedCampaign.includes_mktbudget && !!parsedResult[0].marketing_budget) {\n        marketing_budget = parsedResult[0].marketing_budget;\n      }\n\n      const extra_service_fee = extraService.help ? HELP_SERVICE_FEE : extraService.sos ? SOS_SERVICE_FEE : 0;\n\n      if (publishedPostStatus === 0 && extra_service_fee > 0 || // If help and sos are added as extra service\n      publishedPostStatus === 4 // If paid campaigns are selected, temporary placeholder status\n      ) {\n        const isExtraServiceAdded = publishedPostStatus === 0 && extra_service_fee > 0 ? true : false;\n        const extra_service_fee_with_vat = extra_service_fee * 1.24; // Total price for the extra service including vat\n\n        const amount = parsedResult[0].job_post_campaign_money;\n        const totalSum = (marketing_budget + amount) * 1.24;\n        const details = {\n          company_id: formValues.company_id,\n          company_name,\n          business_id,\n          firstname,\n          lastname,\n          email,\n          address,\n          zip_code,\n          city,\n          description: isExtraServiceAdded ? extra_service_description : description,\n          totalSum: isExtraServiceAdded ? extra_service_fee_with_vat : totalSum,\n          amount: isExtraServiceAdded ? extra_service_fee : amount,\n          post_id: postId,\n          order_id: orderId,\n          marketing_budget,\n          mkt_description,\n          selectedCampaign\n        };\n\n        if (payment_method === 'invoice') {\n          yield put(sendInvoiceToTalous(details));\n        } else if (payment_method === 'online') {\n          yield put(registerPayment(details));\n        }\n      } // Post saved as a draft or free campaign or help/sos feature\n      //if (parsedResult[0].job_post_status !== 4)\n      else {\n        yield put(saveAndPublishAdvertisementSuccess());\n      }\n    } else {\n      yield put(saveAndPublishAdvertisementFailed());\n    }\n  } catch (error) {\n    console.log(error);\n    yield put(saveAndPublishAdvertisementFailed());\n  }\n}\n\nfunction* getJobPostByPostIdSaga(_ref) {\n  let {\n    jobPostNumber\n  } = _ref;\n\n  try {\n    const jbn = 653536;\n    const url = `${API_SERVER_EST}/jobPostNumber`;\n    const jobPostNumber = store.getState().companyProfile.profile.jobPostNumber;\n    const userRole = store.getState().client.user.data[6].user_type;\n    const body = JSON.stringify({\n      jobPostNumber: userRole === 'admin' ? jobPostNumber : jobPostNumber // company_id: userRole === 'admin' ? id.split('admin')[1] : companyId,\n\n    });\n    const result = yield call(apiOpenRequest, url, body);\n    const jsonResult = JSON.stringify(result.data);\n    const resultParsed = JSON.parse(result.data);\n    yield put(openAdToSeeAdInfoSuccess(resultParsed[0]));\n  } catch (error) {\n    console.log(error);\n    yield put(hideSpinner());\n  }\n}\n\nfunction* getAllAdsByStatusSaga(_ref2) {\n  let {\n    status\n  } = _ref2;\n\n  try {\n    const url = `${API_SERVER}/SearchJobPosts`;\n    const {\n      client,\n      usersCompanyList,\n      companyProfile\n    } = store.getState();\n    const uuid = client.user.data[2];\n    const roleId = client.user.data[5];\n    let selectedCompanyId;\n    selectedCompanyId = usersCompanyList.selectedCompany.company_id;\n    const assignedCompanyId = client.user.data[6].company_id;\n\n    if (!selectedCompanyId) {\n      // For first time registered users, client company_id is null since user profile is not updated\n      selectedCompanyId = companyProfile.profile.company_id;\n    }\n\n    const company_id = roleId === 0 ? selectedCompanyId : assignedCompanyId; //super user with many companies\n\n    const body = JSON.stringify({\n      status,\n      uuid,\n      company_id\n    });\n    const result = yield call(apiManualPost, url, body);\n    const resultParsed = JSON.parse(result.data);\n    yield put(getAllAdsByStatusSuccess(status, resultParsed));\n  } catch (error) {\n    console.log(error);\n  }\n} // Populating vacancy form when editing or copying\n\n\nfunction* populateVacancyFormSaga(_ref3) {\n  let {\n    id,\n    isToEdit\n  } = _ref3;\n\n  try {\n    const url = `${API_SERVER_EST}`;\n    const companyId = store.getState().companyProfile.profile.asutuS_REGISTRIKOOD;\n    const campaigns = store.getState().advertisement.campaigns;\n    const userRole = store.getState().client.user.data[6].user_type;\n    const body = JSON.stringify({\n      toopakkuminE_NUMBER: userRole === 'admin' ? id.split('admin')[0] : id,\n      asutuS_REGISTRIKOOD: userRole === 'admin' ? id.split('admin')[1] : companyId\n    });\n    const result = yield call(apiManualPost, url, body);\n    const resultParsed = JSON.parse(result.data); // console.log('resultParsed', resultParsed);\n    // If we are populating from Draft Component, we are editing--> call UpdateJobPost API, it needs company_id && post_id which is being sent along with the vacancy form!\n\n    const {\n      post_id,\n      company_id,\n      company_image,\n      image_id,\n      job_title,\n      job_type,\n      job_hours,\n      job_category,\n      job_location,\n      job_description,\n      is_agreement,\n      due_date,\n      is_email_notification,\n      email,\n      notice_frequency,\n      campaign_id,\n      marketing_platform,\n      more_budget,\n      marketing_budget,\n      application_link\n    } = resultParsed[0];\n\n    if (isToEdit) {\n      yield put(change('vacancy', 'post_id', post_id));\n      yield put(change('vacancy', 'company_id', company_id));\n\n      if (company_image) {\n        yield put(change('vacancy', 'image_document', company_image));\n        yield put(change('vacancy', 'image_id', image_id));\n      }\n    }\n\n    yield put(change('vacancy', 'job_title', job_title));\n    yield put(change('vacancy', 'job_type', job_type));\n    yield put(change('vacancy', 'job_hours', job_hours));\n    yield put(change('vacancy', 'job_category', job_category));\n    yield put(change('vacancy', 'job_location', job_location));\n    yield put(change('vacancy', 'job_description', job_description));\n    yield put(change('vacancy', 'is_agreement', is_agreement));\n    yield put(change('vacancy', 'application_link', application_link));\n    yield put(change('vacancy', 'due_date', due_date));\n    yield put(change('vacancy', 'is_email_notification', is_email_notification));\n    yield put(change('vacancy', 'email', email));\n    yield put(change('vacancy', 'notice_frequency', notice_frequency));\n    const postCampaign = campaigns.find(campaign => campaign.id === campaign_id);\n    const campaignDetails = {\n      postCampaign,\n      marketing_platform,\n      more_budget,\n      marketing_budget\n    };\n    yield put(populateVacancyFormSuccess(campaignDetails, isToEdit));\n  } catch (e) {\n    console.log(e);\n  }\n} // Update advertisement - editAdvertForm is open/ Campaigns are not shown here.\n\n\nfunction* updateJobPostSaga() {\n  try {\n    const advertisement = store.getState().advertisement.viewSelectedAd;\n    const keys = Object.keys(advertisement); // console.log('keys', keys);\n\n    const refinedKeys = keys && keys.filter(key => key !== 'company_image' && key !== 'total_applicants' && key !== 'total_likes' && key !== 'total_viewed' && key !== 'value' && key !== 'company_logo' && key !== 'marketing_budget' // Don't update budget when just editing vacancy.\n    ); // Irrelevant keys, not needed here\n\n    for (const key of refinedKeys) {\n      yield put(change('editVacancy', key, advertisement[key]));\n    }\n\n    if (advertisement.company_image) {\n      yield put(change('editVacancy', 'image_document', advertisement.company_image));\n    }\n\n    if (!advertisement.notice_frequency) {\n      yield put(change('editVacancy', 'notice_frequency', 7));\n    }\n\n    yield put(change('editVacancy', 'is_agreement', true));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* updateAndPublishAdvertisementSaga() {\n  try {\n    let body;\n    const url = `${API_SERVER}/UpdateJobPost`;\n    const formValues = getFormValues('editVacancy')(store.getState());\n    const uuid = store.getState().client.user.data[2];\n    const {\n      uploadedImage\n    } = store.getState().advertisement;\n    const userRole = store.getState().client.user.data[6].user_type;\n    const refinedUploadedImage = uploadedImage && uploadedImage.name && uploadedImage.name.replace(/\\(\\d+\\)/, 'JP'); // If stored filename has (int), dropzone doesn't understand the path..so changing such names before sending to db.\n\n    const refinedFormValues = filterObj('image_document', formValues); // image_document array means, it already exists in db, no need to send while updating\n\n    if (Array.isArray(formValues.image_document) === true) {\n      body = JSON.stringify({ ...refinedFormValues,\n        uuid\n      });\n    } else if (!uploadedImage.name) {\n      // no uploaded image means, no need to send any base64. Also, if there is an image stored in db..and we want to delete it, I am changing the formvalues of image_document in component\n      body = JSON.stringify({ ...formValues,\n        uuid\n      });\n    } else {\n      const base64 = formValues.image_document;\n      body = JSON.stringify({ ...formValues,\n        uuid,\n        image_document: {\n          uuid,\n          document_id: uploadedImage.id,\n          path: '',\n          filename: refinedUploadedImage,\n          filetype: uploadedImage.type,\n          data: base64\n        }\n      });\n    }\n\n    const result = yield call(apiManualPost, url, body);\n    const parsedResult = JSON.parse(result.data);\n\n    if (parsedResult) {\n      yield put(updateAndPublishAdvertisementSuccess());\n\n      if (userRole === 'admin') {\n        yield put(openAdToSeeAdInfo(`${formValues.post_id}admin${formValues.company_id}`));\n      } else {\n        yield put(openAdToSeeAdInfo(formValues.post_id));\n      }\n    } else {\n      yield put(saveAndPublishAdvertisementFailed());\n    }\n  } catch (e) {\n    console.log(e);\n    yield put(saveAndPublishAdvertisementFailed());\n  }\n} // Update campaign\n\n\nfunction* updateCampaignSaga(_ref4) {\n  let {\n    id\n  } = _ref4;\n\n  try {\n    yield put(closeDialog());\n    const {\n      advertisement,\n      client,\n      companyProfile\n    } = store.getState();\n    const paymentInfoForm = getFormValues('paymentInfo')(store.getState());\n    const payment_method = paymentInfoForm && paymentInfoForm.payment_method; // Upgrade campaign\n\n    const url = `${API_SERVER}/HandleCampaignUpgrade`;\n    const uuid = store.getState().client.user.data[2];\n    const {\n      type,\n      includes_mktbudget\n    } = advertisement.selectedCampaign;\n    const campaign_id = advertisement.selectedCampaign.id;\n    const userRole = client.user.data[6].user_type;\n    const post_id = userRole === 'admin' ? id.split('admin')[0] : id;\n    const companyId = userRole === 'admin' ? id.split('admin')[1] : companyProfile.profile.company_id;\n    const due_date = formValueSelector('campaign')(store.getState(), 'due_date');\n    let parsedCompany = {};\n    const body = {\n      campaign_type: type,\n      uuid,\n      post_id,\n      company_id: companyId,\n      due_date\n    };\n\n    if (includes_mktbudget) {\n      const {\n        marketing_platform,\n        more_budget,\n        marketing_budget\n      } = advertisement.marketingDetails;\n      body.marketing_platform = !!marketing_platform ? marketing_platform : null;\n      body.more_budget = !!more_budget ? more_budget : null;\n      body.marketing_budget = !!marketing_budget ? parseInt(marketing_budget) : 0;\n    }\n\n    const result = yield call(apiManualPost, url, JSON.stringify({ ...body\n    }));\n    const resultParsed = JSON.parse(result.data);\n\n    if (resultParsed) {\n      //If admin is upgrading post or updating jobpost on behalf of companies:\n      if (userRole === 'admin') {\n        const body2 = {\n          company_id: parseInt(companyId),\n          uuid\n        };\n        const jobPostOwner = yield call(apiManualPost, `${API_SERVER}/GetCompanyProfile`, JSON.stringify({ ...body2\n        }));\n        parsedCompany = JSON.parse(jobPostOwner.data);\n      }\n\n      const {\n        company_name,\n        business_id,\n        firstname,\n        lastname,\n        email,\n        address,\n        zip_code,\n        city\n      } = userRole === 'admin' ? parsedCompany[0] : companyProfile.profile;\n      const jobTitle = advertisement.viewSelectedAd.job_title;\n      const description = `${jobTitle} | Kampanjapaketti - ${customTranslateCampaign(campaign_id)}`;\n      const mkt_description = `${jobTitle} | Lisätty markkinointiraha`;\n      const orderId = resultParsed[0].order_id;\n      const previousCampaignPrice = resultParsed[0].prev_campaign_money;\n      const newCampaignPrice = resultParsed[0].new_campaign_money;\n      const amount = newCampaignPrice - previousCampaignPrice; // If mkt budget is added.\n\n      let marketing_budget = 0;\n      const newMarketingBudget = resultParsed[0].marketing_budget;\n\n      if (includes_mktbudget && newMarketingBudget > 0) {\n        marketing_budget = newMarketingBudget;\n      }\n\n      const totalSum = (marketing_budget + amount) * 1.24; // If new and more expensive campaign price OR more marketing budget, generate invoice\n\n      const details = {\n        company_id: companyId,\n        company_name,\n        business_id,\n        firstname,\n        lastname,\n        email,\n        address,\n        zip_code,\n        city,\n        description,\n        totalSum,\n        amount,\n        post_id: parseInt(post_id),\n        order_id: orderId,\n        marketing_budget,\n        mkt_description,\n        isSameCampaign: amount === 0 ? true : false,\n        // Meaning same campaign but new budget\n        selectedCampaign: advertisement.selectedCampaign,\n        postIdToFetch: id\n      };\n\n      if (payment_method === 'invoice') {\n        yield put(sendInvoiceToTalous(details));\n      } else if (payment_method === 'online') {\n        yield put(registerPayment(details));\n      } else {\n        yield put(showSuccessSnackbar());\n      }\n    }\n  } catch (error) {\n    console.log(error);\n    yield put(showFailedSnackbar());\n  }\n}\n\nfunction* changeJobPostStatusSaga(_ref5) {\n  let {\n    id\n  } = _ref5;\n\n  try {\n    const url = `${API_SERVER}/UpdateJobPostStatus`;\n    const {\n      company_id\n    } = store.getState().companyProfile.profile;\n    const post_id = id;\n    const userRole = store.getState().client.user.data[6].user_type;\n    const body = JSON.stringify({\n      post_id: userRole === 'admin' ? id.split('admin')[0] : post_id,\n      // For admins, we need to get company id from post itself\n      company_id: userRole === 'admin' ? id.split('admin')[1] : company_id,\n      status: 2\n    });\n    const result = yield call(apiManualPost, url, body);\n\n    if (result.data === 'Job Post Status updated successfully!') {\n      yield put(showSuccessSnackbar());\n      yield put(openAdToSeeAdInfo(id));\n    } else {\n      yield put(showFailedSnackbar());\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nfunction* saveMarketingDetailsSaga() {\n  try {\n    const formValues = getFormValues('marketingDetails')(store.getState());\n    const {\n      marketing_platform,\n      more_budget,\n      marketing_budget\n    } = formValues;\n\n    if (!marketing_platform) {\n      yield put(touch('marketingDetails', 'marketing_platform'));\n      return;\n    }\n\n    if (!more_budget) {\n      yield put(touch('marketingDetails', 'more_budget'));\n      return;\n    }\n\n    if (more_budget === 'yes') {\n      if (!marketing_budget) {\n        yield put(touch('marketingDetails', 'marketing_budget'));\n        return;\n      }\n    }\n\n    if (marketing_budget && (parseInt(marketing_budget) < 1 || !/^[0-9]+$/.test(marketing_budget))) {\n      return;\n    }\n\n    yield put(saveMarketingDetailsSuccess(formValues));\n    yield put(closeDialog());\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nfunction* displayInitialDetails(_ref6) {\n  let {\n    isToEdit\n  } = _ref6;\n\n  try {\n    if (!isToEdit) yield put(initialize('applicantDetails', getFormInitialValues('applicantDetails')(store.getState())));\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nfunction* deleteJobPostSaga(_ref7) {\n  let {\n    id\n  } = _ref7;\n\n  try {\n    const url = `${API_SERVER}/DeleteJobPost`;\n    const companyId = store.getState().companyProfile.profile.company_id;\n    const userRole = store.getState().client.user.data[6].user_type;\n    const body = JSON.stringify({\n      post_id: userRole === 'admin' ? id.split('admin')[0] : id,\n      company_id: userRole === 'admin' ? id.split('admin')[1] : companyId\n    });\n    yield call(apiManualPost, url, body);\n\n    if (userRole === 'admin') {\n      yield put(filterJobs(true));\n    } else {\n      yield put(getAllAdsByStatus(0));\n      yield put(getAllAdsByStatus(1));\n      yield put(getAllAdsByStatus(2));\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* saveAdvertisementAsDraft() {\n  yield put(saveAndPublishAdvertisement());\n}\n\nfunction* getApplicationDetailsByIdSaga(_ref8) {\n  let {\n    application_id,\n    company_id,\n    post_id,\n    email\n  } = _ref8;\n\n  try {\n    const url = `${API_SERVER}/GetApplicationById`;\n    const body = JSON.stringify({\n      application_id,\n      company_id,\n      post_id,\n      email\n    });\n    const result = yield call(apiManualPost, url, body);\n    const resultParsed = JSON.parse(result.data);\n\n    if (resultParsed) {\n      yield put(getApplicationDetailsByIdSuccess(resultParsed[0]));\n      yield put(openAdToSeeAdInfo(post_id));\n    }\n    /* if (!resultParsed[0].interview_title) {\n      const form = getFormValues('applicantDetails')(store.getState());\n      form.interview_title = 'Haastattelu';\n    } */\n\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nfunction* updateApplicantStatusSaga(_ref9) {\n  let {\n    application_id,\n    company_id,\n    post_id,\n    email,\n    status\n  } = _ref9;\n\n  try {\n    const url = `${API_SERVER}/UpdateJobApplicationStatus`;\n    const body = JSON.stringify({\n      application_id,\n      company_id,\n      post_id,\n      email,\n      status\n    });\n    const result = yield call(apiManualPost, url, body);\n\n    if (result.data === \"Job Application's status updated successfully!\") {\n      //yield put(showSuccessSnackbar());\n      yield put(getApplicationDetailsById(application_id, company_id, post_id, email));\n      yield put(openAdToSeeAdInfo(post_id));\n    } else {\n      yield put(showFailedSnackbar());\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nfunction* updateJobApplicationDetailsSaga(_ref10) {\n  let {\n    application_id,\n    company_id,\n    post_id,\n    email,\n    update\n  } = _ref10;\n\n  try {\n    let body;\n    const url = `${API_SERVER}/UpdateJobApplicationDetails`;\n    const formValues = getFormValues('applicantDetails')(store.getState());\n    const loggedInUser = store.getState().client.user.data[1];\n    const {\n      application_notes,\n      interview_title,\n      interview_msg,\n      interview_date,\n      interview_time,\n      interview_place\n    } = formValues;\n\n    if (update === 'note') {\n      body = JSON.stringify({\n        application_id,\n        company_id,\n        post_id,\n        email,\n        update,\n        application_notes\n      });\n    } else {\n      body = JSON.stringify({\n        application_id,\n        company_id,\n        post_id,\n        email,\n        update,\n        interview_title,\n        interview_msg,\n        interview_date,\n        interview_time,\n        interview_place,\n        loggedInUser\n      });\n    }\n\n    const result = yield call(apiManualPost, url, body);\n\n    if (result.data === \"Job Application's details updated successfully!\" || result.data === 'Interview reminder emails sent successfully!') {\n      yield put(showSuccessSnackbar());\n      yield put(getApplicationDetailsById(application_id, company_id, post_id, email));\n      yield put(openAdToSeeAdInfo(post_id));\n    } else {\n      yield put(showFailedSnackbar());\n    } // console.log('result', result);\n\n  } catch (e) {\n    console.log(e);\n  }\n} // Dashboard chart\n\n\nfunction* getJobPostViewsByDateSaga() {\n  try {\n    const url = `${API_SERVER}/GetJobPostViewsByDate`;\n    const {\n      company_id\n    } = store.getState().advertisement.viewSelectedAd;\n    const {\n      post_id\n    } = store.getState().advertisement.viewSelectedAd;\n    const body = JSON.stringify({\n      company_id,\n      post_id\n    });\n    const result = yield call(apiManualPost, url, body);\n    const resultParsed = JSON.parse(result.data);\n\n    if (resultParsed) {\n      yield put(getJobPostViewsByDateSuccess(resultParsed));\n    }\n  } catch (e) {\n    console.log(e);\n  }\n} //DELETE APPLICATION SAGA\n\n\nfunction* deleteApplicationSaga() {\n  try {\n    const url = `${API_SERVER}/DeleteApplicationById`;\n    const {\n      applicationDetailsToDelete\n    } = store.getState().advertisement;\n    const {\n      selectedAd\n    } = store.getState().advertisement;\n    const body = JSON.stringify({ ...applicationDetailsToDelete\n    });\n    const result = yield call(apiManualPost, url, body);\n\n    if (result.data === 'Job application successfully deleted') {\n      yield put(openAdToSeeAdInfo(selectedAd));\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* changeRouteSaga() {\n  try {\n    const userRole = store.getState().client.user.data[6].user_type;\n\n    if (userRole === 'company') {\n      browserHistory.push('/omat-ilmoitukseni');\n    }\n\n    if (userRole === 'admin') {\n      browserHistory.push('/lisapalvelu');\n    }\n\n    yield put(null); //Yield statement for generator function\n  } catch (error) {\n    console.log(error);\n  }\n} // When navigateAdsFromMainMenu is dispatched, we want to ensure the page lands to 0 index.\n\n\nfunction* changePaginationSaga() {\n  yield put(changeAdvertPage({\n    selected: 0\n  }));\n}\n\nfunction* adminGetUserCompanyProfileSaga(_ref11) {\n  let {\n    id\n  } = _ref11;\n  const url = `${API_SERVER}/GetCompanyProfile`;\n\n  try {\n    const uuid = store.getState().client.user.data[2];\n    const body = JSON.stringify({\n      company_id: id,\n      uuid\n    });\n    const result = yield call(apiManualPost, url, body);\n    const resultParsed = JSON.parse(result.data)[0];\n    yield put(getCompanyProfileSuccess(resultParsed));\n  } catch (e) {\n    console.log(e);\n  }\n} // Automatic answers with email messages saga\n\n\nfunction* populateEmailMessageSaga(_ref12) {\n  var _store$getState$users;\n\n  let {\n    languages\n  } = _ref12;\n  const companyName = (_store$getState$users = store.getState().usersCompanyList.selectedCompany) === null || _store$getState$users === void 0 ? void 0 : _store$getState$users.company_name;\n  const storedLanguages = formValueSelector('vacancy')(store.getState(), 'email_language');\n  const isToSendAutoEmail = store.getState().advertisement.automaticEmailToggleBtn;\n\n  try {\n    if (isToSendAutoEmail) {\n      const messages = messageTemplate(companyName, languages ? languages : storedLanguages);\n      yield put(change('vacancy', 'email_message', messages));\n    }\n  } catch (e) {\n    console.log(e);\n  }\n} // export function* watchGetJobsOffersSaga() {\n//   yield takeEvery(GET_JOBS_OFFERS, getJobsOffersSaga);\n// } // GET JOBS OFFERS\n\n\nexport function* watchsaveAndPublishAdvertisementSaga() {\n  yield takeEvery(SAVE_AND_PUBLISH_ADVERTISEMENT, saveAndPublishAdvertisementSaga);\n}\nexport function* watchupdateAndPublishAdvertisementSaga() {\n  yield takeEvery(UPDATE_AND_PUBLISH_ADVERTISEMENT, updateAndPublishAdvertisementSaga);\n}\nexport function* watchSaveAdvertisementAsDraft() {\n  yield takeEvery(SAVE_ADVERTISEMENT_AS_DRAFT, saveAdvertisementAsDraft);\n}\nexport function* watchgetAllCampaignsSaga() {\n  yield takeEvery(GET_ALL_CAMPAIGNS, getAllCampaignsSaga);\n}\nexport function* watchgetAllJobCategorysSaga() {\n  yield takeEvery(GET_ALL_JOB_CATEGORY, getAllJobCategorySaga);\n}\nexport function* watchgetAllAdsByStatusSaga() {\n  yield takeEvery(GET_ALL_ADS_BY_STATUS, getAllAdsByStatusSaga);\n}\nexport function* watchgetJobPostByPostIdSaga() {\n  yield takeEvery(OPEN_AD_TO_SEE_AD_INFO, getJobPostByPostIdSaga);\n} // export function* watchgetJobPostByPostIdSaga() {\n//   yield takeEvery(GET_AND_OPEN_JOB_POSTS_SUCCESS, getJobPostByPostIdSaga);\n// }\n\nexport function* watchdeleteJobPostSaga() {\n  yield takeEvery(DELETE_ADVERTISEMENT, deleteJobPostSaga);\n}\nexport function* watchupdateJobPostSaga() {\n  yield takeEvery(UPDATE_ADVERTISEMENT, updateJobPostSaga);\n}\nexport function* watchpopulateVacancyFormSaga() {\n  yield takeEvery(POPULATE_VACANCY_FORM, populateVacancyFormSaga);\n}\nexport function* watchupdateCampaignSaga() {\n  yield takeEvery(SAVE_NEW_CAMPAIGN, updateCampaignSaga);\n}\nexport function* watchchangeJobPostStatusSaga() {\n  yield takeEvery(CHANGE_ACTIVE_POST_TO_INACTIVE, changeJobPostStatusSaga);\n}\nexport function* watchgetApplicationDetailsByIdSaga() {\n  yield takeEvery(GET_APPLICATION_DETAILS_BY_ID, getApplicationDetailsByIdSaga);\n}\nexport function* watchupdateApplicantStatusSaga() {\n  yield takeEvery(UPDATE_APPLICANT_STATUS, updateApplicantStatusSaga);\n}\nexport function* watchupdateJobApplicationDetailsSaga() {\n  yield takeEvery(UPDATE_JOB_APPLICATION_DETAILS, updateJobApplicationDetailsSaga);\n}\nexport function* watchgetJobPostViewsByDateSaga() {\n  yield takeEvery(GET_JOBPOST_VIEWS_BY_DATE, getJobPostViewsByDateSaga);\n}\nexport function* watchchangePaginationSaga() {\n  yield takeEvery(NAVIGATE_ADS_FROM_MAIN_MENU, changePaginationSaga);\n  yield takeEvery(OPEN_AD_TO_SEE_AD_INFO, changePaginationSaga);\n}\nexport function* watchEditInterviewDetailsSaga() {\n  yield takeEvery(EDIT_INTERVIEW_DETAILS, displayInitialDetails);\n}\nexport function* watchSaveMarketingDetailsSaga() {\n  yield takeEvery(SAVE_MARKETING_DETAILS, saveMarketingDetailsSaga);\n}\nexport function* watchdeleteApplicationSaga() {\n  yield takeEvery(DELETE_APPLICATION, deleteApplicationSaga);\n}\nexport function* watchChangeRouteSaga() {\n  yield takeEvery(CHANGE_ROUTE, changeRouteSaga);\n}\nexport function* watchAdminGetUserCompanyProfileSaga() {\n  yield takeEvery(ADMIN_GET_USER_PROFILE, adminGetUserCompanyProfileSaga);\n}\nexport function* watchPopulateEmailMessageSaga() {\n  yield takeEvery(POPULATE_EMAIL_MESSAGE, populateEmailMessageSaga);\n  yield takeEvery(AUTO_EMAIL_TO_APPLICANT, populateEmailMessageSaga);\n}","map":{"version":3,"names":["useState","takeEvery","put","call","getFormValues","change","formValueSelector","initialize","getFormInitialValues","touch","SAVE_AND_PUBLISH_ADVERTISEMENT","UPDATE_AND_PUBLISH_ADVERTISEMENT","API_SERVER","API_SERVER_EST","API_SERVER_EST_GET_ID","GET_ALL_CAMPAIGNS","OPEN_AD_TO_SEE_AD_INFO","UPDATE_ADVERTISEMENT","POPULATE_VACANCY_FORM","DELETE_ADVERTISEMENT","GET_ALL_JOB_CATEGORY","GET_ALL_ADS_BY_STATUS","SAVE_ADVERTISEMENT_AS_DRAFT","SAVE_NEW_CAMPAIGN","CHANGE_ACTIVE_POST_TO_INACTIVE","GET_APPLICATION_DETAILS_BY_ID","UPDATE_APPLICANT_STATUS","GET_JOBPOST_VIEWS_BY_DATE","NAVIGATE_ADS_FROM_MAIN_MENU","UPDATE_JOB_APPLICATION_DETAILS","EDIT_INTERVIEW_DETAILS","SAVE_MARKETING_DETAILS","DELETE_APPLICATION","CHANGE_ROUTE","ADMIN_GET_USER_PROFILE","HELP_SERVICE_FEE","SOS_SERVICE_FEE","POPULATE_EMAIL_MESSAGE","AUTO_EMAIL_TO_APPLICANT","GET_JOBS_OFFERS","GET_JOBS_OFFERS_SUCCESS","store","apiManualRequest","apiManualPost","apiOpenRequest","apiGetJobsOffers","filterObj","getAllCampaignsSuccess","saveAndPublishAdvertisementSuccess","getAllJobCategorySuccess","saveAndPublishAdvertisementFailed","getAllAdsByStatusSuccess","saveAndPublishAdvertisement","showSuccessSnackbar","showFailedSnackbar","openAdToSeeAdInfo","populateVacancyFormSuccess","updateAndPublishAdvertisementSuccess","getApplicationDetailsById","getApplicationDetailsByIdSuccess","getJobPostViewsByDateSuccess","changeAdvertPage","getAllAdsByStatus","filterJobs","hideSpinner","saveMarketingDetailsSuccess","closeDialog","registerPayment","sendInvoiceToTalous","getCompanyProfileSuccess","openAdToSeeAdInfoSuccess","getJobsOffers","customTranslateCampaign","browserHistory","messageTemplate","getAllCampaignsSaga","url","result","resultParsed","JSON","parse","data","error","console","log","getAllJobCategorySaga","jobPostNumber","saveAndPublishAdvertisementSaga","body","parsedCompany","advertisement","client","companyProfile","getState","formValues","paymentInfoForm","uuid","user","userRole","user_type","payment_method","companyBusinessId","profile","companyDetails","parseInt","jobPostOwner","stringify","selectedCampaign","isSaveAdvertisementAsDraft","isToEdit","uploadedImage","marketingDetails","extraService","isDraft","refinedUploadedImage","name","replace","refinedFormValues","statusToUpdate","help","sos","type","selectedService","Array","isArray","image_document","campaign_type","status","extra_service","base64","document_id","id","path","filename","filetype","includes_mktbudget","marketing_platform","more_budget","marketing_budget","parsedResult","company_name","business_id","firstname","lastname","email","address","zip_code","city","jobTitle","jobName","postId","orderId","order_id","publishedPostStatus","job_post_status","description","mkt_description","extra_service_description","extra_service_fee","isExtraServiceAdded","extra_service_fee_with_vat","amount","job_post_campaign_money","totalSum","details","company_id","post_id","getJobPostByPostIdSaga","jbn","jsonResult","getAllAdsByStatusSaga","usersCompanyList","roleId","selectedCompanyId","selectedCompany","assignedCompanyId","populateVacancyFormSaga","companyId","asutuS_REGISTRIKOOD","campaigns","toopakkuminE_NUMBER","split","company_image","image_id","job_title","job_type","job_hours","job_category","job_location","job_description","is_agreement","due_date","is_email_notification","notice_frequency","campaign_id","application_link","postCampaign","find","campaign","campaignDetails","e","updateJobPostSaga","viewSelectedAd","keys","Object","refinedKeys","filter","key","updateAndPublishAdvertisementSaga","updateCampaignSaga","body2","previousCampaignPrice","prev_campaign_money","newCampaignPrice","new_campaign_money","newMarketingBudget","isSameCampaign","postIdToFetch","changeJobPostStatusSaga","saveMarketingDetailsSaga","test","displayInitialDetails","deleteJobPostSaga","saveAdvertisementAsDraft","getApplicationDetailsByIdSaga","application_id","updateApplicantStatusSaga","updateJobApplicationDetailsSaga","update","loggedInUser","application_notes","interview_title","interview_msg","interview_date","interview_time","interview_place","getJobPostViewsByDateSaga","deleteApplicationSaga","applicationDetailsToDelete","selectedAd","changeRouteSaga","push","changePaginationSaga","selected","adminGetUserCompanyProfileSaga","populateEmailMessageSaga","languages","companyName","storedLanguages","isToSendAutoEmail","automaticEmailToggleBtn","messages","watchsaveAndPublishAdvertisementSaga","watchupdateAndPublishAdvertisementSaga","watchSaveAdvertisementAsDraft","watchgetAllCampaignsSaga","watchgetAllJobCategorysSaga","watchgetAllAdsByStatusSaga","watchgetJobPostByPostIdSaga","watchdeleteJobPostSaga","watchupdateJobPostSaga","watchpopulateVacancyFormSaga","watchupdateCampaignSaga","watchchangeJobPostStatusSaga","watchgetApplicationDetailsByIdSaga","watchupdateApplicantStatusSaga","watchupdateJobApplicationDetailsSaga","watchgetJobPostViewsByDateSaga","watchchangePaginationSaga","watchEditInterviewDetailsSaga","watchSaveMarketingDetailsSaga","watchdeleteApplicationSaga","watchChangeRouteSaga","watchAdminGetUserCompanyProfileSaga","watchPopulateEmailMessageSaga"],"sources":["/Users/eduardkazeks/Documents/GitHub/JobPortalEE/src/sagas/advertisements.saga.js"],"sourcesContent":["import {useState} from 'react'\nimport { takeEvery, put, call } from 'redux-saga/effects';\nimport { getFormValues, change, formValueSelector, initialize, getFormInitialValues, touch } from 'redux-form';\nimport {\n  SAVE_AND_PUBLISH_ADVERTISEMENT,\n  UPDATE_AND_PUBLISH_ADVERTISEMENT,\n  API_SERVER,\n  API_SERVER_EST,\n  API_SERVER_EST_GET_ID,\n  GET_ALL_CAMPAIGNS,\n  OPEN_AD_TO_SEE_AD_INFO,\n  UPDATE_ADVERTISEMENT,\n  POPULATE_VACANCY_FORM,\n  DELETE_ADVERTISEMENT,\n  GET_ALL_JOB_CATEGORY,\n  GET_ALL_ADS_BY_STATUS,\n  SAVE_ADVERTISEMENT_AS_DRAFT,\n  SAVE_NEW_CAMPAIGN,\n  CHANGE_ACTIVE_POST_TO_INACTIVE,\n  GET_APPLICATION_DETAILS_BY_ID,\n  UPDATE_APPLICANT_STATUS,\n  GET_JOBPOST_VIEWS_BY_DATE,\n  NAVIGATE_ADS_FROM_MAIN_MENU,\n  UPDATE_JOB_APPLICATION_DETAILS,\n  EDIT_INTERVIEW_DETAILS,\n  SAVE_MARKETING_DETAILS,\n  DELETE_APPLICATION,\n  CHANGE_ROUTE,\n  ADMIN_GET_USER_PROFILE,\n  HELP_SERVICE_FEE,\n  SOS_SERVICE_FEE,\n  POPULATE_EMAIL_MESSAGE,\n  AUTO_EMAIL_TO_APPLICANT,\n  GET_JOBS_OFFERS,\n  GET_JOBS_OFFERS_SUCCESS,\n} from '../constants';\nimport store from '../store';\nimport { apiManualRequest, apiManualPost, apiOpenRequest, apiGetJobsOffers } from '../utils/request';\nimport { filterObj } from '../utils/wrappers';\nimport {\n  getAllCampaignsSuccess,\n  saveAndPublishAdvertisementSuccess,\n  getAllJobCategorySuccess,\n  saveAndPublishAdvertisementFailed,\n  getAllAdsByStatusSuccess,\n  saveAndPublishAdvertisement,\n  showSuccessSnackbar,\n  showFailedSnackbar,\n  openAdToSeeAdInfo,\n  populateVacancyFormSuccess,\n  updateAndPublishAdvertisementSuccess,\n  getApplicationDetailsById,\n  getApplicationDetailsByIdSuccess,\n  getJobPostViewsByDateSuccess,\n  changeAdvertPage,\n  getAllAdsByStatus,\n  filterJobs,\n  hideSpinner,\n  saveMarketingDetailsSuccess,\n  closeDialog,\n  registerPayment,\n  sendInvoiceToTalous,\n  getCompanyProfileSuccess,\n  openAdToSeeAdInfoSuccess,\n  getJobsOffers,\n} from '../actions';\nimport { customTranslateCampaign } from '../utils/customTranslate';\nimport browserHistory from '../history';\nimport { messageTemplate } from '../components/companies/advertisements/automaticMessageToApplicants/messages';\n\n// GET JOBS OFFERS\n\n// function* getJobsOffersSaga() {\n//   try {\n//     const offers = yield call(apiGetJobsOffers);\n//     yield put({type: GET_JOBS_OFFERS_SUCCESS, offers})\n//   } catch (error) {\n//     console.log(error);\n//   }\n// }\n\n// END\n\nfunction* getAllCampaignsSaga() {\n  try {\n    const url = `${API_SERVER}/GetCampaigns`;\n    const result = yield call(apiManualRequest, url);\n    const resultParsed = JSON.parse(result.data);\n    yield put(getAllCampaignsSuccess(resultParsed));\n  } catch (error) {\n    console.log(error);\n  }\n}\nfunction* getAllJobCategorySaga(jobPostNumber) {\n  try {\n    const jobPostNumber = 654439;\n    const url = `${API_SERVER_EST}/${jobPostNumber}`;\n    const result = yield call(apiOpenRequest, url);\n    const resultParsed = JSON.parse(result.data);\n    yield put(getAllJobCategorySuccess(resultParsed));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* saveAndPublishAdvertisementSaga() {\n  try {\n    let url;\n    let body;\n    let parsedCompany = {};\n\n    const { advertisement, client, companyProfile } = store.getState();\n    const formValues = getFormValues('vacancy')(store.getState());\n    const paymentInfoForm = getFormValues('paymentInfo')(store.getState());\n    const uuid = client.user.data[2];\n    const userRole = client.user.data[6].user_type;\n    const payment_method = paymentInfoForm && paymentInfoForm.payment_method;\n    const companyBusinessId = companyProfile.profile.companyBusinessId;\n\n    if (!formValues.companyBusinessId) {\n      formValues.companyBusinessId = companyBusinessId; // Also sending company_id to add company specific post.\n    }\n\n    yield put(closeDialog());\n\n    if (userRole === 'admin') {\n      const companyDetails = {\n        companyBusinessId: parseInt(formValues.companyBusinessId),\n        uuid,\n      };\n      const jobPostOwner = yield call(apiManualPost, `${API_SERVER_EST}/postJob`, JSON.stringify({ ...companyDetails }));\n      parsedCompany = JSON.parse(jobPostOwner.data);\n    }\n\n    const { selectedCampaign, isSaveAdvertisementAsDraft, isToEdit, uploadedImage, marketingDetails, extraService } = advertisement;\n    const isDraft = isSaveAdvertisementAsDraft;\n    const refinedUploadedImage = uploadedImage && uploadedImage.name && uploadedImage.name.replace(/\\s+\\(\\d+\\)/g, 'JP'); // If stored filename has (int), dropzone doesn't understand the path..so changing such names before sending to db.\n    const refinedFormValues = filterObj('image_document', formValues);\n\n    if (isToEdit) {\n      url = `${API_SERVER}/UpdateJobPost`;\n    } else {\n      url = `${API_SERVER_EST}`;\n    }\n\n    const statusToUpdate = isDraft || extraService.help || extraService.sos ? 0 : selectedCampaign.type === 'free' ? 1 : 4;\n\n    const selectedService = extraService.help ? 'help' : extraService.sos ? 'sos' : null;\n\n    // image_document array means, it already exists in db, no need to send while updating\n    if (Array.isArray(formValues.image_document) === true) {\n      body = {\n        ...refinedFormValues,\n        uuid,\n        campaign_type: selectedCampaign.type,\n        status: statusToUpdate,\n        extra_service: selectedService,\n      };\n    } else if (!uploadedImage.name) {\n      // no uploaded image means, no need to send any base64. Also, if there is an image stored in db..and we want to delete it, I am changing the formvalues of image_document in component\n      body = {\n        ...formValues,\n        uuid,\n        campaign_type: selectedCampaign.type,\n        status: statusToUpdate,\n        extra_service: selectedService,\n      };\n    } else if (uploadedImage.name && !Array.isArray(formValues.image_document)) {\n      const base64 = formValues.image_document;\n      body = {\n        ...formValues,\n        uuid,\n        campaign_type: selectedCampaign.type,\n        status: statusToUpdate,\n        image_document: {\n          uuid,\n          document_id: uploadedImage.id,\n          path: '',\n          filename: refinedUploadedImage,\n          filetype: uploadedImage.type,\n          data: base64,\n        },\n        extra_service: selectedService,\n      };\n    }\n    if (selectedCampaign.includes_mktbudget) {\n      const { marketing_platform, more_budget, marketing_budget } = marketingDetails;\n      body.marketing_platform = !!marketing_platform ? marketing_platform : null;\n      body.more_budget = !!more_budget ? more_budget : null;\n      body.marketing_budget = !!marketing_budget ? parseInt(marketing_budget) : 0;\n    }\n    // SAVING AND PUBLISHING JOBPOST\n    const result = yield call(apiManualPost, url, JSON.stringify({ ...body }));\n    const parsedResult = JSON.parse(result.data);\n    //console.log(result.data);\n    // If publishing post, Generate invoice under the hood via Talousvirta API or online payment via NETS\n\n    if (parsedResult) {\n      const { company_name, business_id, firstname, lastname, email, address, zip_code, city } =\n        userRole === 'admin' ? parsedCompany[0] : companyProfile.profile;\n      const jobTitle = formValues.jobName;\n      const postId = parsedResult[0].jobPostNumber;\n      const orderId = parsedResult[0].order_id;\n      const publishedPostStatus = parsedResult[0].job_post_status;\n      const description = `${jobTitle} | Kampanjapaketti - ${customTranslateCampaign(selectedCampaign.id)}`;\n      const mkt_description = `${jobTitle} | Lisätty markkinointiraha`;\n\n      const extra_service_description = `Aktivoitu lisäpalvelu | ${extraService.help ? 'HELP' : 'SOS'}`;\n\n      // If mkt budget is added with campaigns with mkt budget, i.e. 5th campaign for now.\n      let marketing_budget = 0;\n      if (selectedCampaign.includes_mktbudget && !!parsedResult[0].marketing_budget) {\n        marketing_budget = parsedResult[0].marketing_budget;\n      }\n\n      const extra_service_fee = extraService.help ? HELP_SERVICE_FEE : extraService.sos ? SOS_SERVICE_FEE : 0;\n\n      if (\n        (publishedPostStatus === 0 && extra_service_fee > 0) || // If help and sos are added as extra service\n        publishedPostStatus === 4 // If paid campaigns are selected, temporary placeholder status\n      ) {\n        const isExtraServiceAdded = publishedPostStatus === 0 && extra_service_fee > 0 ? true : false;\n        const extra_service_fee_with_vat = extra_service_fee * 1.24; // Total price for the extra service including vat\n\n        const amount = parsedResult[0].job_post_campaign_money;\n        const totalSum = (marketing_budget + amount) * 1.24;\n\n        const details = {\n          company_id: formValues.company_id,\n          company_name,\n          business_id,\n          firstname,\n          lastname,\n          email,\n          address,\n          zip_code,\n          city,\n          description: isExtraServiceAdded ? extra_service_description : description,\n          totalSum: isExtraServiceAdded ? extra_service_fee_with_vat : totalSum,\n          amount: isExtraServiceAdded ? extra_service_fee : amount,\n          post_id: postId,\n          order_id: orderId,\n          marketing_budget,\n          mkt_description,\n          selectedCampaign,\n        };\n\n        if (payment_method === 'invoice') {\n          yield put(sendInvoiceToTalous(details));\n        } else if (payment_method === 'online') {\n          yield put(registerPayment(details));\n        }\n      }\n      // Post saved as a draft or free campaign or help/sos feature\n      //if (parsedResult[0].job_post_status !== 4)\n      else {\n        yield put(saveAndPublishAdvertisementSuccess());\n      }\n    } else {\n      yield put(saveAndPublishAdvertisementFailed());\n    }\n  } catch (error) {\n    console.log(error);\n    yield put(saveAndPublishAdvertisementFailed());\n  }\n}\n\nfunction* getJobPostByPostIdSaga({ jobPostNumber }) {\n  try {\n    const jbn = 653536;\n    const url = `${API_SERVER_EST}/jobPostNumber`;\n    const jobPostNumber = store.getState().companyProfile.profile.jobPostNumber;\n    const userRole = store.getState().client.user.data[6].user_type;\n\n    const body = JSON.stringify({\n      jobPostNumber: userRole === 'admin' ? jobPostNumber : jobPostNumber,\n      // company_id: userRole === 'admin' ? id.split('admin')[1] : companyId,\n    });\n    const result = yield call(apiOpenRequest, url, body);\n   const jsonResult = JSON.stringify(result.data)\n    const resultParsed = JSON.parse(result.data);\n    yield put(openAdToSeeAdInfoSuccess(resultParsed[0]));\n  } catch (error) {\n    console.log(error);\n    yield put(hideSpinner());\n  }\n}\n\nfunction* getAllAdsByStatusSaga({ status }) {\n  try {\n    const url = `${API_SERVER}/SearchJobPosts`;\n    const { client, usersCompanyList, companyProfile } = store.getState();\n    const uuid = client.user.data[2];\n    const roleId = client.user.data[5];\n    let selectedCompanyId;\n    selectedCompanyId = usersCompanyList.selectedCompany.company_id;\n    const assignedCompanyId = client.user.data[6].company_id;\n\n    if (!selectedCompanyId) {\n      // For first time registered users, client company_id is null since user profile is not updated\n      selectedCompanyId = companyProfile.profile.company_id;\n    }\n\n    const company_id = roleId === 0 ? selectedCompanyId : assignedCompanyId; //super user with many companies\n    const body = JSON.stringify({\n      status,\n      uuid,\n      company_id,\n    });\n\n    const result = yield call(apiManualPost, url, body);\n    const resultParsed = JSON.parse(result.data);\n    yield put(getAllAdsByStatusSuccess(status, resultParsed));\n  } catch (error) {\n    console.log(error);\n  }\n}\n// Populating vacancy form when editing or copying\nfunction* populateVacancyFormSaga({ id, isToEdit }) {\n  try {\n    const url = `${API_SERVER_EST}`;\n    const companyId = store.getState().companyProfile.profile.asutuS_REGISTRIKOOD;\n    const campaigns = store.getState().advertisement.campaigns;\n    const userRole = store.getState().client.user.data[6].user_type;\n\n    const body = JSON.stringify({\n      toopakkuminE_NUMBER: userRole === 'admin' ? id.split('admin')[0] : id,\n      asutuS_REGISTRIKOOD: userRole === 'admin' ? id.split('admin')[1] : companyId,\n    });\n    const result = yield call(apiManualPost, url, body);\n    const resultParsed = JSON.parse(result.data);\n    // console.log('resultParsed', resultParsed);\n    // If we are populating from Draft Component, we are editing--> call UpdateJobPost API, it needs company_id && post_id which is being sent along with the vacancy form!\n\n    const {\n      post_id,\n      company_id,\n      company_image,\n      image_id,\n      job_title,\n      job_type,\n      job_hours,\n      job_category,\n      job_location,\n      job_description,\n      is_agreement,\n      due_date,\n      is_email_notification,\n      email,\n      notice_frequency,\n      campaign_id,\n      marketing_platform,\n      more_budget,\n      marketing_budget,\n      application_link,\n    } = resultParsed[0];\n\n    if (isToEdit) {\n      yield put(change('vacancy', 'post_id', post_id));\n      yield put(change('vacancy', 'company_id', company_id));\n      if (company_image) {\n        yield put(change('vacancy', 'image_document', company_image));\n        yield put(change('vacancy', 'image_id', image_id));\n      }\n    }\n    yield put(change('vacancy', 'job_title', job_title));\n    yield put(change('vacancy', 'job_type', job_type));\n    yield put(change('vacancy', 'job_hours', job_hours));\n    yield put(change('vacancy', 'job_category', job_category));\n    yield put(change('vacancy', 'job_location', job_location));\n    yield put(change('vacancy', 'job_description', job_description));\n    yield put(change('vacancy', 'is_agreement', is_agreement));\n    yield put(change('vacancy', 'application_link', application_link));\n\n    yield put(change('vacancy', 'due_date', due_date));\n    yield put(change('vacancy', 'is_email_notification', is_email_notification));\n    yield put(change('vacancy', 'email', email));\n    yield put(change('vacancy', 'notice_frequency', notice_frequency));\n\n    const postCampaign = campaigns.find(campaign => campaign.id === campaign_id);\n\n    const campaignDetails = {\n      postCampaign,\n      marketing_platform,\n      more_budget,\n      marketing_budget,\n    };\n\n    yield put(populateVacancyFormSuccess(campaignDetails, isToEdit));\n  } catch (e) {\n    console.log(e);\n  }\n}\n\n// Update advertisement - editAdvertForm is open/ Campaigns are not shown here.\n\nfunction* updateJobPostSaga() {\n  try {\n    const advertisement = store.getState().advertisement.viewSelectedAd;\n    const keys = Object.keys(advertisement);\n    // console.log('keys', keys);\n    const refinedKeys =\n      keys &&\n      keys.filter(\n        key =>\n          key !== 'company_image' &&\n          key !== 'total_applicants' &&\n          key !== 'total_likes' &&\n          key !== 'total_viewed' &&\n          key !== 'value' &&\n          key !== 'company_logo' &&\n          key !== 'marketing_budget', // Don't update budget when just editing vacancy.\n      ); // Irrelevant keys, not needed here\n\n    for (const key of refinedKeys) {\n      yield put(change('editVacancy', key, advertisement[key]));\n    }\n    if (advertisement.company_image) {\n      yield put(change('editVacancy', 'image_document', advertisement.company_image));\n    }\n    if (!advertisement.notice_frequency) {\n      yield put(change('editVacancy', 'notice_frequency', 7));\n    }\n    yield put(change('editVacancy', 'is_agreement', true));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* updateAndPublishAdvertisementSaga() {\n  try {\n    let body;\n    const url = `${API_SERVER}/UpdateJobPost`;\n    const formValues = getFormValues('editVacancy')(store.getState());\n    const uuid = store.getState().client.user.data[2];\n    const { uploadedImage } = store.getState().advertisement;\n    const userRole = store.getState().client.user.data[6].user_type;\n\n    const refinedUploadedImage = uploadedImage && uploadedImage.name && uploadedImage.name.replace(/\\(\\d+\\)/, 'JP'); // If stored filename has (int), dropzone doesn't understand the path..so changing such names before sending to db.\n    const refinedFormValues = filterObj('image_document', formValues);\n\n    // image_document array means, it already exists in db, no need to send while updating\n    if (Array.isArray(formValues.image_document) === true) {\n      body = JSON.stringify({\n        ...refinedFormValues,\n        uuid,\n      });\n    } else if (!uploadedImage.name) {\n      // no uploaded image means, no need to send any base64. Also, if there is an image stored in db..and we want to delete it, I am changing the formvalues of image_document in component\n      body = JSON.stringify({\n        ...formValues,\n        uuid,\n      });\n    } else {\n      const base64 = formValues.image_document;\n      body = JSON.stringify({\n        ...formValues,\n        uuid,\n        image_document: {\n          uuid,\n          document_id: uploadedImage.id,\n          path: '',\n          filename: refinedUploadedImage,\n          filetype: uploadedImage.type,\n          data: base64,\n        },\n      });\n    }\n\n    const result = yield call(apiManualPost, url, body);\n    const parsedResult = JSON.parse(result.data);\n    if (parsedResult) {\n      yield put(updateAndPublishAdvertisementSuccess());\n      if (userRole === 'admin') {\n        yield put(openAdToSeeAdInfo(`${formValues.post_id}admin${formValues.company_id}`));\n      } else {\n        yield put(openAdToSeeAdInfo(formValues.post_id));\n      }\n    } else {\n      yield put(saveAndPublishAdvertisementFailed());\n    }\n  } catch (e) {\n    console.log(e);\n    yield put(saveAndPublishAdvertisementFailed());\n  }\n}\n\n// Update campaign\nfunction* updateCampaignSaga({ id }) {\n  try {\n    yield put(closeDialog());\n\n    const { advertisement, client, companyProfile } = store.getState();\n    const paymentInfoForm = getFormValues('paymentInfo')(store.getState());\n    const payment_method = paymentInfoForm && paymentInfoForm.payment_method;\n\n    // Upgrade campaign\n    const url = `${API_SERVER}/HandleCampaignUpgrade`;\n    const uuid = store.getState().client.user.data[2];\n    const { type, includes_mktbudget } = advertisement.selectedCampaign;\n    const campaign_id = advertisement.selectedCampaign.id;\n    const userRole = client.user.data[6].user_type;\n    const post_id = userRole === 'admin' ? id.split('admin')[0] : id;\n    const companyId = userRole === 'admin' ? id.split('admin')[1] : companyProfile.profile.company_id;\n    const due_date = formValueSelector('campaign')(store.getState(), 'due_date');\n    let parsedCompany = {};\n\n    const body = {\n      campaign_type: type,\n      uuid,\n      post_id,\n      company_id: companyId,\n      due_date,\n    };\n\n    if (includes_mktbudget) {\n      const { marketing_platform, more_budget, marketing_budget } = advertisement.marketingDetails;\n\n      body.marketing_platform = !!marketing_platform ? marketing_platform : null;\n      body.more_budget = !!more_budget ? more_budget : null;\n      body.marketing_budget = !!marketing_budget ? parseInt(marketing_budget) : 0;\n    }\n\n    const result = yield call(apiManualPost, url, JSON.stringify({ ...body }));\n    const resultParsed = JSON.parse(result.data);\n\n    if (resultParsed) {\n      //If admin is upgrading post or updating jobpost on behalf of companies:\n      if (userRole === 'admin') {\n        const body2 = {\n          company_id: parseInt(companyId),\n          uuid,\n        };\n        const jobPostOwner = yield call(apiManualPost, `${API_SERVER}/GetCompanyProfile`, JSON.stringify({ ...body2 }));\n        parsedCompany = JSON.parse(jobPostOwner.data);\n      }\n\n      const { company_name, business_id, firstname, lastname, email, address, zip_code, city } =\n        userRole === 'admin' ? parsedCompany[0] : companyProfile.profile;\n      const jobTitle = advertisement.viewSelectedAd.job_title;\n      const description = `${jobTitle} | Kampanjapaketti - ${customTranslateCampaign(campaign_id)}`;\n      const mkt_description = `${jobTitle} | Lisätty markkinointiraha`;\n\n      const orderId = resultParsed[0].order_id;\n      const previousCampaignPrice = resultParsed[0].prev_campaign_money;\n      const newCampaignPrice = resultParsed[0].new_campaign_money;\n      const amount = newCampaignPrice - previousCampaignPrice;\n\n      // If mkt budget is added.\n      let marketing_budget = 0;\n      const newMarketingBudget = resultParsed[0].marketing_budget;\n      if (includes_mktbudget && newMarketingBudget > 0) {\n        marketing_budget = newMarketingBudget;\n      }\n      const totalSum = (marketing_budget + amount) * 1.24;\n\n      // If new and more expensive campaign price OR more marketing budget, generate invoice\n\n      const details = {\n        company_id: companyId,\n        company_name,\n        business_id,\n        firstname,\n        lastname,\n        email,\n        address,\n        zip_code,\n        city,\n        description,\n        totalSum,\n        amount,\n        post_id: parseInt(post_id),\n        order_id: orderId,\n        marketing_budget,\n        mkt_description,\n        isSameCampaign: amount === 0 ? true : false, // Meaning same campaign but new budget\n        selectedCampaign: advertisement.selectedCampaign,\n        postIdToFetch: id,\n      };\n      if (payment_method === 'invoice') {\n        yield put(sendInvoiceToTalous(details));\n      } else if (payment_method === 'online') {\n        yield put(registerPayment(details));\n      } else {\n        yield put(showSuccessSnackbar());\n      }\n    }\n  } catch (error) {\n    console.log(error);\n    yield put(showFailedSnackbar());\n  }\n}\n\nfunction* changeJobPostStatusSaga({ id }) {\n  try {\n    const url = `${API_SERVER}/UpdateJobPostStatus`;\n    const { company_id } = store.getState().companyProfile.profile;\n    const post_id = id;\n    const userRole = store.getState().client.user.data[6].user_type;\n\n    const body = JSON.stringify({\n      post_id: userRole === 'admin' ? id.split('admin')[0] : post_id, // For admins, we need to get company id from post itself\n      company_id: userRole === 'admin' ? id.split('admin')[1] : company_id,\n      status: 2,\n    });\n    const result = yield call(apiManualPost, url, body);\n    if (result.data === 'Job Post Status updated successfully!') {\n      yield put(showSuccessSnackbar());\n      yield put(openAdToSeeAdInfo(id));\n    } else {\n      yield put(showFailedSnackbar());\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\nfunction* saveMarketingDetailsSaga() {\n  try {\n    const formValues = getFormValues('marketingDetails')(store.getState());\n    const { marketing_platform, more_budget, marketing_budget } = formValues;\n    if (!marketing_platform) {\n      yield put(touch('marketingDetails', 'marketing_platform'));\n      return;\n    }\n    if (!more_budget) {\n      yield put(touch('marketingDetails', 'more_budget'));\n      return;\n    }\n    if (more_budget === 'yes') {\n      if (!marketing_budget) {\n        yield put(touch('marketingDetails', 'marketing_budget'));\n        return;\n      }\n    }\n    if (marketing_budget && (parseInt(marketing_budget) < 1 || !/^[0-9]+$/.test(marketing_budget))) {\n      return;\n    }\n    yield put(saveMarketingDetailsSuccess(formValues));\n    yield put(closeDialog());\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nfunction* displayInitialDetails({ isToEdit }) {\n  try {\n    if (!isToEdit) yield put(initialize('applicantDetails', getFormInitialValues('applicantDetails')(store.getState())));\n  } catch (e) {\n    console.log(e);\n  }\n}\nfunction* deleteJobPostSaga({ id }) {\n  try {\n    const url = `${API_SERVER}/DeleteJobPost`;\n    const companyId = store.getState().companyProfile.profile.company_id;\n    const userRole = store.getState().client.user.data[6].user_type;\n\n    const body = JSON.stringify({\n      post_id: userRole === 'admin' ? id.split('admin')[0] : id,\n      company_id: userRole === 'admin' ? id.split('admin')[1] : companyId,\n    });\n    yield call(apiManualPost, url, body);\n\n    if (userRole === 'admin') {\n      yield put(filterJobs(true));\n    } else {\n      yield put(getAllAdsByStatus(0));\n      yield put(getAllAdsByStatus(1));\n      yield put(getAllAdsByStatus(2));\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\nfunction* saveAdvertisementAsDraft() {\n  yield put(saveAndPublishAdvertisement());\n}\n\nfunction* getApplicationDetailsByIdSaga({ application_id, company_id, post_id, email }) {\n  try {\n    const url = `${API_SERVER}/GetApplicationById`;\n\n    const body = JSON.stringify({\n      application_id,\n      company_id,\n      post_id,\n      email,\n    });\n\n    const result = yield call(apiManualPost, url, body);\n    const resultParsed = JSON.parse(result.data);\n    if (resultParsed) {\n      yield put(getApplicationDetailsByIdSuccess(resultParsed[0]));\n      yield put(openAdToSeeAdInfo(post_id));\n    }\n\n    /* if (!resultParsed[0].interview_title) {\n      const form = getFormValues('applicantDetails')(store.getState());\n      form.interview_title = 'Haastattelu';\n    } */\n  } catch (e) {\n    console.log(e);\n  }\n}\n\nfunction* updateApplicantStatusSaga({ application_id, company_id, post_id, email, status }) {\n  try {\n    const url = `${API_SERVER}/UpdateJobApplicationStatus`;\n    const body = JSON.stringify({\n      application_id,\n      company_id,\n      post_id,\n      email,\n      status,\n    });\n    const result = yield call(apiManualPost, url, body);\n    if (result.data === \"Job Application's status updated successfully!\") {\n      //yield put(showSuccessSnackbar());\n      yield put(getApplicationDetailsById(application_id, company_id, post_id, email));\n      yield put(openAdToSeeAdInfo(post_id));\n    } else {\n      yield put(showFailedSnackbar());\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\nfunction* updateJobApplicationDetailsSaga({ application_id, company_id, post_id, email, update }) {\n  try {\n    let body;\n    const url = `${API_SERVER}/UpdateJobApplicationDetails`;\n    const formValues = getFormValues('applicantDetails')(store.getState());\n    const loggedInUser = store.getState().client.user.data[1];\n    const { application_notes, interview_title, interview_msg, interview_date, interview_time, interview_place } = formValues;\n\n    if (update === 'note') {\n      body = JSON.stringify({\n        application_id,\n        company_id,\n        post_id,\n        email,\n        update,\n        application_notes,\n      });\n    } else {\n      body = JSON.stringify({\n        application_id,\n        company_id,\n        post_id,\n        email,\n        update,\n        interview_title,\n        interview_msg,\n        interview_date,\n        interview_time,\n        interview_place,\n        loggedInUser,\n      });\n    }\n    const result = yield call(apiManualPost, url, body);\n    if (result.data === \"Job Application's details updated successfully!\" || result.data === 'Interview reminder emails sent successfully!') {\n      yield put(showSuccessSnackbar());\n      yield put(getApplicationDetailsById(application_id, company_id, post_id, email));\n      yield put(openAdToSeeAdInfo(post_id));\n    } else {\n      yield put(showFailedSnackbar());\n    }\n    // console.log('result', result);\n  } catch (e) {\n    console.log(e);\n  }\n}\n\n// Dashboard chart\nfunction* getJobPostViewsByDateSaga() {\n  try {\n    const url = `${API_SERVER}/GetJobPostViewsByDate`;\n    const { company_id } = store.getState().advertisement.viewSelectedAd;\n    const { post_id } = store.getState().advertisement.viewSelectedAd;\n    const body = JSON.stringify({\n      company_id,\n      post_id,\n    });\n    const result = yield call(apiManualPost, url, body);\n    const resultParsed = JSON.parse(result.data);\n    if (resultParsed) {\n      yield put(getJobPostViewsByDateSuccess(resultParsed));\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\n\n//DELETE APPLICATION SAGA\nfunction* deleteApplicationSaga() {\n  try {\n    const url = `${API_SERVER}/DeleteApplicationById`;\n    const { applicationDetailsToDelete } = store.getState().advertisement;\n    const { selectedAd } = store.getState().advertisement;\n\n    const body = JSON.stringify({\n      ...applicationDetailsToDelete,\n    });\n\n    const result = yield call(apiManualPost, url, body);\n\n    if (result.data === 'Job application successfully deleted') {\n      yield put(openAdToSeeAdInfo(selectedAd));\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* changeRouteSaga() {\n  try {\n    const userRole = store.getState().client.user.data[6].user_type;\n\n    if (userRole === 'company') {\n      browserHistory.push('/omat-ilmoitukseni');\n    }\n    if (userRole === 'admin') {\n      browserHistory.push('/lisapalvelu');\n    }\n    yield put(null); //Yield statement for generator function\n  } catch (error) {\n    console.log(error);\n  }\n}\n\n// When navigateAdsFromMainMenu is dispatched, we want to ensure the page lands to 0 index.\nfunction* changePaginationSaga() {\n  yield put(changeAdvertPage({ selected: 0 }));\n}\n\nfunction* adminGetUserCompanyProfileSaga({ id }) {\n  const url = `${API_SERVER}/GetCompanyProfile`;\n\n  try {\n    const uuid = store.getState().client.user.data[2];\n    const body = JSON.stringify({ company_id: id, uuid });\n    const result = yield call(apiManualPost, url, body);\n    const resultParsed = JSON.parse(result.data)[0];\n    yield put(getCompanyProfileSuccess(resultParsed));\n  } catch (e) {\n    console.log(e);\n  }\n}\n\n// Automatic answers with email messages saga\nfunction* populateEmailMessageSaga({ languages }) {\n  const companyName = store.getState().usersCompanyList.selectedCompany?.company_name;\n  const storedLanguages = formValueSelector('vacancy')(store.getState(), 'email_language');\n\n  const isToSendAutoEmail = store.getState().advertisement.automaticEmailToggleBtn;\n\n  try {\n    if (isToSendAutoEmail) {\n      const messages = messageTemplate(companyName, languages ? languages : storedLanguages);\n      yield put(change('vacancy', 'email_message', messages));\n    }\n  } catch (e) {\n    console.log(e);\n  }\n}\n\n// export function* watchGetJobsOffersSaga() {\n//   yield takeEvery(GET_JOBS_OFFERS, getJobsOffersSaga);\n// } // GET JOBS OFFERS\nexport function* watchsaveAndPublishAdvertisementSaga() {\n  yield takeEvery(SAVE_AND_PUBLISH_ADVERTISEMENT, saveAndPublishAdvertisementSaga);\n}\nexport function* watchupdateAndPublishAdvertisementSaga() {\n  yield takeEvery(UPDATE_AND_PUBLISH_ADVERTISEMENT, updateAndPublishAdvertisementSaga);\n}\nexport function* watchSaveAdvertisementAsDraft() {\n  yield takeEvery(SAVE_ADVERTISEMENT_AS_DRAFT, saveAdvertisementAsDraft);\n}\n\nexport function* watchgetAllCampaignsSaga() {\n  yield takeEvery(GET_ALL_CAMPAIGNS, getAllCampaignsSaga);\n}\n\nexport function* watchgetAllJobCategorysSaga() {\n  yield takeEvery(GET_ALL_JOB_CATEGORY, getAllJobCategorySaga);\n}\n\nexport function* watchgetAllAdsByStatusSaga() {\n  yield takeEvery(GET_ALL_ADS_BY_STATUS, getAllAdsByStatusSaga);\n}\nexport function* watchgetJobPostByPostIdSaga() {\n  yield takeEvery(OPEN_AD_TO_SEE_AD_INFO, getJobPostByPostIdSaga);\n}\n// export function* watchgetJobPostByPostIdSaga() {\n//   yield takeEvery(GET_AND_OPEN_JOB_POSTS_SUCCESS, getJobPostByPostIdSaga);\n// }\n\nexport function* watchdeleteJobPostSaga() {\n  yield takeEvery(DELETE_ADVERTISEMENT, deleteJobPostSaga);\n}\nexport function* watchupdateJobPostSaga() {\n  yield takeEvery(UPDATE_ADVERTISEMENT, updateJobPostSaga);\n}\nexport function* watchpopulateVacancyFormSaga() {\n  yield takeEvery(POPULATE_VACANCY_FORM, populateVacancyFormSaga);\n}\nexport function* watchupdateCampaignSaga() {\n  yield takeEvery(SAVE_NEW_CAMPAIGN, updateCampaignSaga);\n}\nexport function* watchchangeJobPostStatusSaga() {\n  yield takeEvery(CHANGE_ACTIVE_POST_TO_INACTIVE, changeJobPostStatusSaga);\n}\nexport function* watchgetApplicationDetailsByIdSaga() {\n  yield takeEvery(GET_APPLICATION_DETAILS_BY_ID, getApplicationDetailsByIdSaga);\n}\nexport function* watchupdateApplicantStatusSaga() {\n  yield takeEvery(UPDATE_APPLICANT_STATUS, updateApplicantStatusSaga);\n}\nexport function* watchupdateJobApplicationDetailsSaga() {\n  yield takeEvery(UPDATE_JOB_APPLICATION_DETAILS, updateJobApplicationDetailsSaga);\n}\nexport function* watchgetJobPostViewsByDateSaga() {\n  yield takeEvery(GET_JOBPOST_VIEWS_BY_DATE, getJobPostViewsByDateSaga);\n}\nexport function* watchchangePaginationSaga() {\n  yield takeEvery(NAVIGATE_ADS_FROM_MAIN_MENU, changePaginationSaga);\n  yield takeEvery(OPEN_AD_TO_SEE_AD_INFO, changePaginationSaga);\n}\n\nexport function* watchEditInterviewDetailsSaga() {\n  yield takeEvery(EDIT_INTERVIEW_DETAILS, displayInitialDetails);\n}\nexport function* watchSaveMarketingDetailsSaga() {\n  yield takeEvery(SAVE_MARKETING_DETAILS, saveMarketingDetailsSaga);\n}\n\nexport function* watchdeleteApplicationSaga() {\n  yield takeEvery(DELETE_APPLICATION, deleteApplicationSaga);\n}\n\nexport function* watchChangeRouteSaga() {\n  yield takeEvery(CHANGE_ROUTE, changeRouteSaga);\n}\n\nexport function* watchAdminGetUserCompanyProfileSaga() {\n  yield takeEvery(ADMIN_GET_USER_PROFILE, adminGetUserCompanyProfileSaga);\n}\n\nexport function* watchPopulateEmailMessageSaga() {\n  yield takeEvery(POPULATE_EMAIL_MESSAGE, populateEmailMessageSaga);\n  yield takeEvery(AUTO_EMAIL_TO_APPLICANT, populateEmailMessageSaga);\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}